<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/styles/registrar.css">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="icon" href="/img/x.png">
    <title>Registrarse</title>
</head>
<body>
    <img src="/img/xwhite.svg" alt="XS" class="XS"> 

    <div class="modal-dialog text-center">
        <div class="col-sm-12" >
            <div class="modal-content">
                    <div class="col-12 text__content">
                        <h1>Registrarse</h1>
                    </div>

                    <form class="col-12">
                        <div class="form-group"  id="user-group">
                            <input type="text" class="form-control" placeholder="Escribra un correo electrónico" id="email">
                        </div>

                        <div class="form-group"  id="contrasena-group">
                            <input type="password" class="form-control" placeholder="Escribra una contraseña" id="password">
                        </div>

                        <a type="submit" class="btn btn-secondary" id="boton">
                        Registrarse</a> 
                        
                    </form>

                    <div class="col-12">
                        <p id="text__creada"></p>
                    </div>
                    <div class="col-12 text__down">
                        <span class="no_cuenta">Si ya tienes una cuenta  </span>
                        <a href="" id="iniciar">Iniciar Sesion</a>
                    </div>
            </div>
        </div>
    </div>
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#F3F4F5" fill-opacity="1" d="M0,64L60,74.7C120,85,240,107,360,133.3C480,160,600,192,720,181.3C840,171,960,117,1080,96C1200,75,1320,85,1380,90.7L1440,96L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>



    <!-- CODIGO PARA PODER REGISTRARSE -->

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-auth.js";
        // import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBUdvuHDauOlX7tFMwyBLLZGkKZadRUCCk",
            authDomain: "x-store-88318.firebaseapp.com",
            projectId: "x-store-88318",
            storageBucket: "x-store-88318.appspot.com",
            messagingSenderId: "698918610514",
            appId: "1:698918610514:web:9f617968b4a3fb1d95618b"
        };
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);


        // Creamos el evento para que funcione el boton
        document.getElementById("boton").addEventListener("click", function(){
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;


            createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                // Signed in
                const user = userCredential.user;
                console.log("Cuenta Creada")
                swal({
                    title: "Tu Cuenta a sido creada",
                    text: "Presiona el botón OK para Iniciar Sesión",
                    icon: "success",
                    buttons: true,
                    })

                    .then((willDelete) => {
                    if (willDelete) {
                        window.open("/index.html")    
                    } 
                    else { 
                    }
                    });
            })

            

            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                console.log("error")
                swal({
                    title:"Ocurrio un error vuelva a colocar sus datos",
                    text:"Posiblemente el correo electrónico que colocó ya esta en uso.",
                    icon: "warning",
                })
            });
            
            })
        
            document.getElementById("iniciar").addEventListener("click", function(){
                window.open("/index.html")
            })

    </script>
    
</body>
</html>